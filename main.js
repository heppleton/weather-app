(()=>{"use strict";const e=e=>Math.round(2.2369362921*e),t=e=>`${Math.round(e-273.15)}℃`,n=e=>`${new Date(1e3*e).getHours()}:00`,r=(e,t=[],n="",r={})=>{const a=document.createElement(e);a.classList.add(...t);for(let e in r)a.setAttribute(e,r[e]);return"img"===e?a.src=n:a.textContent=n,a},a=(t,n,a)=>{const d=r("div",["wind-arrow-outer"],e(t)),o=r("div",["wind-arrow-inner","big"===a?"wind-arrow-big":"wind-arrow-small"]),c=document.createElement("img");return c.src="../src/icons/windarrow.svg",c.style.setProperty("transform",`rotate(${n}deg)`),o.appendChild(c),d.appendChild(o),d},d=(e,t)=>{const n=r("div",[]),a=r("img",["big"===t?"weather-icon-big":"weather-icon-small"],`../src/icons/${e.icon}.svg`);return n.appendChild(a),n},o="0ec437db8343a627d6380c3290f18de6",c=async e=>{try{const i=await(async e=>{const t=await fetch(`http://api.openweathermap.org/geo/1.0/direct?q=${e}&limit=1&appid=${o}`);return await t.json()})(e).then((e=>e[0])),s=(({name:e,state:t,country:n},{current:r,hourly:a,daily:d})=>({name:e,state:t,country:n,current:r,hourly:a,daily:d}))(i,await(async({lat:e,lon:t})=>{const n=await fetch(`https://api.openweathermap.org/data/2.5/onecall?lat=${e}&lon=${t}&exclude=minutely&appid=${o}`);return await n.json()})(i));(e=>{const n=r("div",["current-inner"]),o=r("div",["placename"],e.name),c=r("div",["country"],new Intl.DisplayNames(["en"],{type:"region"}).of(e.country)),i=document.createElement("div");i.classList.add("weather"),i.append(r("div",[],t(e.current.temp)),a(e.current.wind_speed,e.current.wind_deg,"big"),d(e.current.weather[0],"big")),n.append(o,c,i),document.querySelector(".current-outer").replaceChildren(n)})(c=s),(e=>{const o=document.querySelector(".hourly-outer");o.replaceChildren(),o.textContent="Next 24 hours";const c=r("div",["hourly-inner"]);for(let o=1;o<25;o++){const i=e[o],s=r("div",["small-holder"]);s.append(r("div",[],n(i.dt)),d(i.weather[0],"small"),r("div",[],t(i.temp)),a(i.wind_speed,i.wind_deg,"small")),c.append(s)}o.appendChild(c)})(c.hourly),(e=>{const t=document.querySelector(".daily-outer");t.replaceChildren(),t.textContent="Next 7 days";const n=r("div",["daily-inner"]);for(let t=1;t<8;t++){const a=e[t],d=r("div",["small-holder"]),o=document.createElement("div"),c=new Date(1e3*a.dt),i=new Intl.DateTimeFormat("en-US",{weekday:"long"}).format(c);o.textContent=i;const s=document.createElement("img");s.src=`../src/icons/${a.weather[0].icon}.svg`;const l=document.createElement("div"),u=Math.round(a.temp.max-273.15);l.textContent=`${u}℃`;const m=document.createElement("div");m.classList.add("wind-holder");const p=Math.round(2.2369362921*a.wind_speed);m.textContent=p;const w=document.createElement("div"),h=document.createElement("img");h.src="../src/icons/windarrow.svg",h.classList.add("small-arrow"),h.style.setProperty("transform",`rotate(${a.wind_deg}deg)`),w.classList.add("wind-arrow"),w.appendChild(h),m.appendChild(w),d.append(o,s,l,m),n.append(d)}t.appendChild(n)})(c.daily)}catch(e){console.log(e)}var c};c("Malaga"),document.getElementById("search-button").addEventListener("click",(()=>{c(document.getElementById("search-input").value)}))})();