(()=>{"use strict";const e=(()=>{let e="metric";const t={metric:{speed:3.6,temp:e=>e-273.15,symbol:"℃"},customary:{speed:2.2369362921,temp:e=>1.8*(e-273.15)+32,symbol:"℉"}};return{getDay:e=>{const t=new Date(1e3*e);return new Intl.DateTimeFormat("en-US",{weekday:"short"}).format(t)},getSpeed:n=>Math.round(n*t[e].speed),getTemp:n=>`${Math.round(t[e].temp(n))}${t[e].symbol}`,getTime:(e,t)=>`${new Date(1e3*(e+t)).getHours()}:00`,toggleUnits:()=>{e="metric"===e?"customary":"metric"}}})(),t=(e,t=[],n="",r={})=>{const a=document.createElement(e);a.classList.add(...t);for(let e in r)a.setAttribute(e,r[e]);return"img"===e?a.src=n:a.textContent=n,a},n=(n,r,a)=>{const o=t("div",["wind-arrow-outer"],e.getSpeed(n)),d=t("div",["wind-arrow-inner","big"===a?"wind-arrow-big":"wind-arrow-small"]),i=document.createElement("img");return i.src="./icons/windarrow.svg",i.style.setProperty("transform",`rotate(${r}deg)`),d.appendChild(i),o.appendChild(d),o};let r;const a=(e,n)=>{const r=t("div",[]),a=t("img",["big"===n?"weather-icon-big":"weather-icon-small"],`./icons/${e.icon}.svg`);return r.appendChild(a),r},o=(o=r)=>{r=o,(r=>{const o=t("div",["current-inner"]),d=t("div",["placename"],r.name),i=t("span",["country"],new Intl.DisplayNames(["en"],{type:"region"}).of(r.country));d.appendChild(i);const c=document.createElement("div");c.classList.add("weather"),c.append(t("div",[],e.getTemp(r.current.temp)),n(r.current.wind_speed,r.current.wind_deg,"big"),a(r.current.weather[0],"big")),o.append(d,c),document.querySelector(".current-outer").replaceChildren(o)})(o),((r,o)=>{const d=document.querySelector(".hourly-outer");d.replaceChildren(),d.textContent="Next 24 hours";const i=t("div",["hourly-inner"]);for(let d=1;d<25;d++){const c=r[d],l=t("div",["small-holder"]);l.append(t("div",[],e.getTime(c.dt,o)),a(c.weather[0],"small"),t("div",[],e.getTemp(c.temp)),n(c.wind_speed,c.wind_deg,"small")),i.append(l)}d.appendChild(i)})(o.hourly,o.timezone_offset),(r=>{const o=document.querySelector(".daily-outer");o.replaceChildren(),o.textContent="Next 7 days";const d=t("div",["daily-inner"]);for(let o=1;o<8;o++){const i=r[o],c=t("div",["small-holder"]);c.append(t("div",[],e.getDay(i.dt)),a(i.weather[0],"small"),t("div",[],e.getTemp(i.temp.max)),n(i.wind_speed,i.wind_deg,"small")),d.append(c)}o.appendChild(d)})(o.daily),document.documentElement.style.setProperty("--weather-image",`url("./images/${o.current.weather[0].icon}.jpg")`)},d="0ec437db8343a627d6380c3290f18de6",i=async e=>{try{const t=await(async e=>{try{const t=await fetch(`https://api.openweathermap.org/geo/1.0/direct?q=${e}&limit=1&appid=${d}`);return await t.json()}catch(e){return e}})(e).then((e=>e[0])),n=(({name:e,state:t,country:n},{current:r,hourly:a,daily:o,timezone_offset:d})=>({name:e,state:t,country:n,current:r,hourly:a,daily:o,timezone_offset:d}))(t,await(async({lat:e,lon:t})=>{try{const n=await fetch(`https://api.openweathermap.org/data/2.5/onecall?lat=${e}&lon=${t}&exclude=minutely&appid=${d}`);return await n.json()}catch(e){return e}})(t));o(n)}catch(e){(e=>{document.querySelector(".hourly-outer").replaceChildren(),document.querySelector(".daily-outer").replaceChildren();const t=document.querySelector(".current-outer");t.replaceChildren(),t.classList.add("error"),t.textContent="Sorry, there was a problem processing your request. Please try again."})()}};i("Portland"),document.getElementById("search-button").addEventListener("click",(()=>{const e=document.getElementById("search-input");e.value&&i(e.value),e.value=""})),document.getElementById("units-toggle").addEventListener("click",(()=>{e.toggleUnits(),o()}))})();