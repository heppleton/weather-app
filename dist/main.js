(()=>{"use strict";const e=(()=>{let e="metric";const t={metric:{speed:3.6,temp:e=>e-273.15,symbol:"℃"},customary:{speed:2.2369362921,temp:e=>1.8*(e-273.15)+32,symbol:"℉"}};return{getDay:e=>{const t=new Date(1e3*e);return new Intl.DateTimeFormat("en-US",{weekday:"short"}).format(t)},getSpeed:r=>Math.round(r*t[e].speed),getTemp:r=>`${Math.round(t[e].temp(r))}${t[e].symbol}`,getTime:(e,t)=>`${new Date(1e3*(e+t)).getHours()}:00`,toggleUnits:()=>{e="metric"===e?"customary":"metric"}}})(),t=(e,t=[],r="",n={})=>{const a=document.createElement(e);a.classList.add(...t);for(let e in n)a.setAttribute(e,n[e]);return"img"===e?a.src=r:a.textContent=r,a},r=(r,n,a)=>{const o=t("div",["wind-arrow-outer"],e.getSpeed(r)),d=t("div",["wind-arrow-inner","big"===a?"wind-arrow-big":"wind-arrow-small"]),i=document.createElement("img");return i.src="../src/icons/windarrow.svg",i.style.setProperty("transform",`rotate(${n}deg)`),d.appendChild(i),o.appendChild(d),o};let n;const a=(e,r)=>{const n=t("div",[]),a=t("img",["big"===r?"weather-icon-big":"weather-icon-small"],`../src/icons/${e.icon}.svg`);return n.appendChild(a),n},o=(o=n)=>{n=o,(n=>{const o=t("div",["current-inner"]),d=t("div",["placename"],n.name),i=t("div",["country"],new Intl.DisplayNames(["en"],{type:"region"}).of(n.country)),c=document.createElement("div");c.classList.add("weather"),c.append(t("div",[],e.getTemp(n.current.temp)),r(n.current.wind_speed,n.current.wind_deg,"big"),a(n.current.weather[0],"big")),o.append(d,i,c),document.querySelector(".current-outer").replaceChildren(o)})(o),((n,o)=>{const d=document.querySelector(".hourly-outer");d.replaceChildren(),d.textContent="Next 24 hours";const i=t("div",["hourly-inner"]);for(let d=1;d<25;d++){const c=n[d],l=t("div",["small-holder"]);l.append(t("div",[],e.getTime(c.dt,o)),a(c.weather[0],"small"),t("div",[],e.getTemp(c.temp)),r(c.wind_speed,c.wind_deg,"small")),i.append(l)}d.appendChild(i)})(o.hourly,o.timezone_offset),(n=>{const o=document.querySelector(".daily-outer");o.replaceChildren(),o.textContent="Next 7 days";const d=t("div",["daily-inner"]);for(let o=1;o<8;o++){const i=n[o],c=t("div",["small-holder"]);c.append(t("div",[],e.getDay(i.dt)),a(i.weather[0],"small"),t("div",[],e.getTemp(i.temp.max)),r(i.wind_speed,i.wind_deg,"small")),d.append(c)}o.appendChild(d)})(o.daily),document.documentElement.style.setProperty("--weather-image",`url("./images/${o.current.weather[0].icon}.jpg")`)},d="0ec437db8343a627d6380c3290f18de6",i=async e=>{try{const t=await(async e=>{try{const t=await fetch(`https://api.openweathermap.org/geo/1.0/direct?q=${e}&limit=1&appid=${d}`);return await t.json()}catch(e){return e}})(e).then((e=>e[0])),r=(({name:e,state:t,country:r},{current:n,hourly:a,daily:o,timezone_offset:d})=>({name:e,state:t,country:r,current:n,hourly:a,daily:o,timezone_offset:d}))(t,await(async({lat:e,lon:t})=>{try{const r=await fetch(`https://api.openweathermap.org/data/2.5/onecall?lat=${e}&lon=${t}&exclude=minutely&appid=${d}`);return await r.json()}catch(e){return e}})(t));o(r)}catch(e){(e=>{document.querySelector(".hourly-outer").replaceChildren(),document.querySelector(".daily-outer").replaceChildren();const t=document.querySelector(".current-outer");t.replaceChildren(),t.classList.add("error"),t.textContent="Sorry, there was a problem processing your request. Please try again."})()}};i("Portland"),document.getElementById("search-button").addEventListener("click",(()=>{const e=document.getElementById("search-input");e.value&&i(e.value),e.value=""})),document.getElementById("units-toggle").addEventListener("click",(()=>{e.toggleUnits(),o()}))})();